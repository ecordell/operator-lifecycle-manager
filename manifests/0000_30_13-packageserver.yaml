##---
# Source: olm/templates/0000_30_13-packageserver.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.packages.apps.redhat.com
spec:
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM5VENDQWQyZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFjTVJvd0dBWURWUVFERXhGd1lXTnIKWVdkbExYTmxjblpsY2kxallUQWVGdzB4T0RFd01Ea3dNVFV3TWpsYUZ3MHlPREV3TURZd01UVXdNamxhTUJ3eApHakFZQmdOVkJBTVRFWEJoWTJ0aFoyVXRjMlZ5ZG1WeUxXTmhNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DCkFROEFNSUlCQ2dLQ0FRRUF0YTA3TUhTbnFaSzBlSGEyUE40RjZULzAwVDJDS2IwN1J4elJRM3NwY0owRU1XcXcKa2pSWDR1UWNOT25pL2V4WXNzWFBaSTllZDh4WXZUa1lwUUdYQ3lWV01oQjdGcG9jUmY5eFArUElMdFRTRHBQLwpvRUV0OEdUVkJheUFjR2VndUJmOGpaTGJvYXNnUlYzNTY4VlE5UlNzWjcvQmQvVjVjOGpYZWJNbG16WDFtTjJwCkpWclo1Y3ZKOEkwV2lFbDZ4VlRoL21sSGxlYVRVd1FqUjdqcUlXZEJESEl1ajNnazEyVTcyV2dmbFJUZDU3dloKempTTWVnczM5b25VUXBOMVpFZnoyYUxlRW5ZaHhXWjdrUDdKRklQV3pBS204cnJnK3NQUmZjWnZOck9qQnVzcwpjZHVUNHFqTGk0ams4RE80aGlYeEN4WTAxK0NwRG1nSGRYczBpUUlEQVFBQm8wSXdRREFPQmdOVkhROEJBZjhFCkJBTUNBcVF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUYKTUFNQkFmOHdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRHJ2bWdiZEVQSW1QaEVTUXRZdng5bW1LdTVSM0hKdwpSMUFXY3VCYVBzZ1RNSnVyc05lV2taRUtKVmRjbEduN1ZNZlhLdHBzZjNmMndsclppVlJhMUtWMVFIay94VFFGClZpRlRoVnZtamJYQlB2eUg0OWhTcGZHTmZiRFZnNElUb3E2Rk9Scm1IUXlQNDl5L0ticnFtcXBMbHhkUGRUTVUKL0Z3NWR3RzVrVGxGQzFmQXpQSFl2dFRWTHo0RGVETEU3dFBkdk9lMm5WaktsaXM4OTg4NmJ0V28rMndKN3k1NAptQXlRcW5XMXZBWTFLNXFBcXRjNkxydndjM0NGTE1EeHFLay9wcjFvQ1pCdHRhdXRRNjdPc0dEci9ONW5CdjFDCms3amFnZEdvMlJVQUFIVjI3d01CdDlESUpwdWpRSlFkM29zWFhESkRtR2hNYnhaM0dkVE12Q3c9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  group: packages.apps.redhat.com
  groupPriorityMinimum: 2000
  versionPriority: 15
  service:
    name: package-server
    namespace: openshift-operator-lifecycle-manager
  version: v1alpha1
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: packagemanifest:system:auth-delegator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: packagemanifest-auth-reader
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: packagemanifest-view
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: admin
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: package-apiserver-clusterrolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aggregated-apiserver-clusterrole
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: package-server-certs
  namespace: openshift-operator-lifecycle-manager
  labels:
    app: package-server
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURhakNDQWxLZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFjTVJvd0dBWURWUVFERXhGd1lXTnIKWVdkbExYTmxjblpsY2kxallUQWVGdzB4T0RFd01Ea3dNVFV3TXpCYUZ3MHhPVEV3TURrd01UVXdNekJhTUJreApGekFWQmdOVkJBTVREbkJoWTJ0aFoyVXRjMlZ5ZG1WeU1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXJSZnhrd3BLQjIwa3IreUhxVEkzb05nMnBzVDdFc2RLUVhPRWMzOGhKUkNUTjU1MzV4M1EKc2VLeXlzcjNNMzJpZStIVmtoNy9uZVlscWlqL0xEM2xKVDJVNnMwSUZhVDJXUnVWNUloaXo0K2kzNmNxUUloQgorRnpaN29TNXRDZ0tGNTBRcjIrQkJ0ZnlmU0ZVKzNCeXJudG40TGpSTXlCWlpERVNYbUozRzNjWERnWjJ3cWNLClNLWGcxUFd4SUFKU3BpRlE4UjlEYVJQL1RuZ2QyZHdnQ1hFTnFhZk5mQzZ6R1NJNksxS0NuM3MyY0dyUXVqaHAKS3JBK1U0V2VKaVNFR3U2cHZac21xSzlqVnQxNE8zT2lFSkE3SThzVkx4a3pLd01tTm05Zy9tb2RWeXNsMmZLQgpoU1ViWjNiZUFkaFFSQnJwK2VMOUxtc2Z1cjdpdElXMHFRSURBUUFCbzRHNU1JRzJNQTRHQTFVZER3RUIvd1FFCkF3SUZvREFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQVFZSUt3WUJCUVVIQXdJd0RBWURWUjBUQVFIL0JBSXcKQURCM0JnTlZIUkVFY0RCdWdqTndZV05yWVdkbExYTmxjblpsY2k1dmNHVnVjMmhwWm5RdGIzQmxjbUYwYjNJdApiR2xtWldONVkyeGxMVzFoYm1GblpYS0NOM0JoWTJ0aFoyVXRjMlZ5ZG1WeUxtOXdaVzV6YUdsbWRDMXZjR1Z5CllYUnZjaTFzYVdabFkzbGpiR1V0YldGdVlXZGxjaTV6ZG1Nd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFFMGIKM3JxVUovazhqNGtFWWhXRlNucXJpNjUvUWdkZC9QYjZLalkvVzlJcnJQVVNEVlZJbFEwZEVDb3pHUWtUWG1mZApXQ2pwbmUyaVN4S254cllQYWdrVzMzK1dHaytYeEJ0RXJ0empLZCtVaGNUUjgzYnJHaUNCbGRtdUtodzdud0dUCmpaMXpCTUh1RzNqYTRBam43cGVoVEgzeDJ4bXBHQmxpWnVsS0cyZkovRmNpN1g3dW5kN0cvYmVMdnBHZzZ6bVgKcnNiVXdwTDBxNlRLZTNMbldUcUVkVitvMzBuc1REaUlmZVFQaFNOSXlTTDlWRHVSeGZZWi9tZVFYSzc3elY3MAp0cCtDeXF0MVF2OUJrZHhBM0hTNThNSks3TGltNnA5aFRyb2VXbEVxd083QkJ1a0RJbmIyT2ZFZDlIazY3Z0pzCk45MGpZQVl3M0FJbmcvK2FXNEk9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb3dJQkFBS0NBUUVBclJmeGt3cEtCMjBrcit5SHFUSTNvTmcycHNUN0VzZEtRWE9FYzM4aEpSQ1RONTUzCjV4M1FzZUt5eXNyM00zMmllK0hWa2g3L25lWWxxaWovTEQzbEpUMlU2czBJRmFUMldSdVY1SWhpejQraTM2Y3EKUUloQitGelo3b1M1dENnS0Y1MFFyMitCQnRmeWZTRlUrM0J5cm50bjRMalJNeUJaWkRFU1htSjNHM2NYRGdaMgp3cWNLU0tYZzFQV3hJQUpTcGlGUThSOURhUlAvVG5nZDJkd2dDWEVOcWFmTmZDNnpHU0k2SzFLQ24zczJjR3JRCnVqaHBLckErVTRXZUppU0VHdTZwdlpzbXFLOWpWdDE0TzNPaUVKQTdJOHNWTHhrekt3TW1ObTlnL21vZFZ5c2wKMmZLQmhTVWJaM2JlQWRoUVJCcnArZUw5TG1zZnVyN2l0SVcwcVFJREFRQUJBb0lCQVFDQXo5ZTc2Q1ZOUDREVQoxcjNpUVBlNjRBeFRzVFZ6TlJIaWdWZnBKNHQvN01UUjJFRThvaWlEcU1RTFBGNFlXSCtKbDNkN1JVeE9zazRIClFua2E4SGpOYlBXY2dyWm9mUm5ER0U5RkFlWWV0cktybzloQ3ErUUVNdjBQam9Bd1BMZTkrT25JMUw3OVc4a2UKSzZiMWN5bzFCS3M2UmUrUkQ1cldmOW8rbVNJd01nZG9Oa3M2OGtqTldrZ21hUkZqRmpwMHJOQlBsQkZPR0tSQQp4aHF3U0p1REJ2RFl3RjRIREQxMkZFMXk0YUVWMk5XSnJLZzJsZTQ0NVJyWCtiTitxc0JVZkFoNmo1ejBxTExCCjh4UHU4NUo0SGVZY3hPLzhpRjdmNERnWWxLZC9zYU5mTmhHMHQxWmd5elZFdGpTVEVBM3NPTGVpYzlvbjZyZFYKVEhrVzg3WDlBb0dCQU14S2RwWWZyaHFicUpkdUZXZHZUN2szUHErbkl0S25ienJmaGhWVGN3K09iaDU5MlFyKwp6cVkrTyt0NXVzQzZyM2tnano1ck5YOWFWZXpuMFdKbXJ5MmJkUVhxUG1tSmRNQ3Nkc0RrQ3JlWTJkeFJLRzhjCjhkOFVnL3N6NitiWnVuWjR0Y00zTXp5Szh2UDdYRy9OeXJRMDhzZHBiVXZUdnBRZ04vWWVKZkQvQW9HQkFOam4KK0laZmlSaSsrTnZ5RlpKY3N4aGNOK1VzSzIrQVJIRFJ6YnFJZGhLUStKTEhpNFFEZ3pTYXJ6SDFxV1R2c3RDcwpSQVJpWTllL1p1bHRPK0JKZVkySVhzNmcxd2NacXJuZmx5WkdLMTBZN2NzcUVXb3l0M2c5NlVHUTM2T1dkcFF4Cm1jaE9IZkMyejZmaHlmK01ITmo3cjA3OXVkNS9PcFo0RVhoVWNUSlhBb0dBYVpBODBQeFQwZ29IUnlDcVRNV1gKRTZVNWJqaldaTFlDWXhDbno1Tk1qSWhUM011NUFOYUVZQ0VlZzJKbW56cVllK1hZUHkvVStCYnMrYnNjVmxXcgpSY3pqM29lWmNwMkZ5QjRXU3p4TFVXM1pmZUF1SGFSK1U0RGRaa3dCSlV2eTcwOFcxV1pMd29nbVhPN1JhRENXCkF5S3RKV0FVQ3kvQ2RmWmtGSGlsc0c4Q2dZQmhMYnpJNXpDVEo2eHpUa2lmNUd4UTg3QVBPdlRTNWRMRUFSdDkKQVBwMVl3SWJNTSt1KzZ2aSs1S1dmWXZCTHlzY0ZySDZqT0pTbk94TWxLWUkzS0phNk1naEp5cHZnZTVkakhFNQpzcUptK1c1QVliNmZwODFQVDkyYmhIN04yZkdTZjQ1NGtaY1VhN01wY2gyQUlwUWlHdEQyUVBMdlhtMHZVT2Z5CjAxSkx6UUtCZ0dYNFJ4bUt3MEN1bGtLU21HSVVGUVJqSEwyS0tlNEd3TUFFTUFXRFR6TFd3NEtTTnZBOWJOUlYKcFZyTUZwK2pQaWRXQlZUS0tpWlllOElOdDltSUlSU2ZuWHB1V2dPejFlTXBuZUoweEJneFYxbkZ1ZG1sYjRMUAp3QmQxdHZQa1lINzIycFVadDlUaHlZc2pzU0VPVXJ4MHFad0R3aWtNNE5KOGVaM0tuRjBMCi0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: package-server
  namespace: openshift-operator-lifecycle-manager
  labels:
    app: package-server
spec:
  strategy:
    type: RollingUpdate
  replicas: 1
  selector:
    matchLabels:
      app: package-server
  template:
    metadata:
      labels:
        app: package-server
    spec:
      serviceAccountName: olm-operator-serviceaccount
      containers:
      - name: package-server
        command:
        - /bin/package-server
        - -v=4
        - --global-namespace
        - openshift-operator-lifecycle-manager
        - --debug
        image: quay.io/coreos/package-server@sha256:cc18b5711fb2126329c969f077f67f41981c87f800f6b2ceae5981422c14917b
        imagePullPolicy: Always
        ports:
        - containerPort: 443
        volumeMounts:
        - name: certs
          mountPath: /apiserver.local.config/certificates
          readOnly: true
        livenessProbe:
            httpGet:
              scheme: HTTPS
              path: /healthz
              port: 443
        readinessProbe:
            httpGet:
              scheme: HTTPS
              path: /healthz
              port: 443
      volumes:
      - name: certs
        secret:
          secretName: package-server-certs
          items:
          - key: tls.crt
            path: apiserver.crt
          - key: tls.key
            path: apiserver.key
      imagePullSecrets:
        - name: coreos-pull-secret
---
apiVersion: v1
kind: Service
metadata:
  name: package-server
  namespace: openshift-operator-lifecycle-manager
spec:
  ports:
  - port: 443
    protocol: TCP
    targetPort: 443
  selector:
    app: package-server
