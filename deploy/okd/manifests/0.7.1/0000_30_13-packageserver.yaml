##---
# Source: olm/templates/0000_30_13-packageserver.yaml
apiVersion: apiregistration.k8s.io/v1beta1
kind: APIService
metadata:
  name: v1alpha1.packages.apps.redhat.com
spec:
  caBundle: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM5VENDQWQyZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFjTVJvd0dBWURWUVFERXhGd1lXTnIKWVdkbExYTmxjblpsY2kxallUQWVGdzB4T0RFd01Ea3dNVFV3TWpaYUZ3MHlPREV3TURZd01UVXdNalphTUJ3eApHakFZQmdOVkJBTVRFWEJoWTJ0aFoyVXRjMlZ5ZG1WeUxXTmhNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DCkFROEFNSUlCQ2dLQ0FRRUE1dzJWSlNucG1xaHZRSDJkdmhhNmxOMjNRMFQ5anNGWFlKNTlOQTk3M1NVUDdlczEKUWNzY1QzOU4yelBGSlpEN1h6YlJQTVZLWDRnS3UxNTEwM3h3UDI0ZlJCUXlvRFpBSSs2TFYxU3NRQStQZU5Hago2c0dlbTlqOWxndVRXaHZ2ejI0NUhIb0hVbElqK2dkSUM1d1doVnd6Q3A3R0VTaHNRNnFmLzdzZk1FN1BCUmYwCllKYVVlcW43U2k0NDdEZHlBM2ptcndhWnBiMCtsWXBXSkJMNExTUHBETTVFUXJzVWJVbFVzaVIyLytlZGhwL1kKMkZWV0tsdmtZYWhISUFaQnlWM245UmwvZ3Bta2d3M3hZcVU1S0VwVlNJWmxRek5rcjBBM1ZkNGQvejBwY1h2SQpkY1RkSlZxVEhYTVFpNjU2NGQyYjI3L0hKZmQ3Q1VTN2hoUjh3UUlEQVFBQm8wSXdRREFPQmdOVkhROEJBZjhFCkJBTUNBcVF3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdFR0NDc0dBUVVGQndNQ01BOEdBMVVkRXdFQi93UUYKTUFNQkFmOHdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBS1dGUlVYaVo1VjY0dUhRc2JQODc2djlFZG5OQVZnVwozLy9PUUxDdjRjd1QrRjhEU1E5d3lGTHUzNlEycnM0aUpjQ1RyVm1zaVNEcTVhQ29VTjg1NEtMOVhZTXZVMU1JCkJDQ0JBVU0wdGRqWjZsVmU2Yi8wWlBuQ2xTNzNCTGpFczhWa0padDlJZ1dmeGk0ZlFiNFdrQ1QyN3Q0SWtZKzMKQUNQVDI3R2lwVGRicE1La1FRb010ajNEK0NkL0ZvWUZKbWdLb0N0cXRaeVpWbEdoLzIycXk0U0dNYzhhbDJGTwpoV3dlM3gyOXgzcEVaQi91V1JsdXY1NFp6VXEzeUpWYmtJWUxybm9NYVZYRjNXN0RiYjhpTnRuR3Bsb3pOWFBSCm5xN29KeFZpYUpDekEydDNIbHlNRmcrS05Jcm96ckFsbCtPOEVVOFMwdkxXTGZaZWEvRWxUd2c9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  group: packages.apps.redhat.com
  groupPriorityMinimum: 2000
  versionPriority: 15
  service:
    name: package-server
    namespace: openshift-operator-lifecycle-manager
  version: v1alpha1
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: packagemanifest:system:auth-delegator
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: packagemanifest-auth-reader
  namespace: kube-system
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: Role
  name: extension-apiserver-authentication-reader
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: packagemanifest-view
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: admin
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: package-apiserver-clusterrolebinding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aggregated-apiserver-clusterrole
subjects:
- kind: ServiceAccount
  name: olm-operator-serviceaccount
  namespace: openshift-operator-lifecycle-manager
---
apiVersion: v1
kind: Secret
type: kubernetes.io/tls
metadata:
  name: package-server-certs
  namespace: openshift-operator-lifecycle-manager
  labels:
    app: package-server
data:
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURhakNDQWxLZ0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFjTVJvd0dBWURWUVFERXhGd1lXTnIKWVdkbExYTmxjblpsY2kxallUQWVGdzB4T0RFd01Ea3dNVFV3TWpaYUZ3MHhPVEV3TURrd01UVXdNalphTUJreApGekFWQmdOVkJBTVREbkJoWTJ0aFoyVXRjMlZ5ZG1WeU1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQXpjNDJ6dFJzMktIZkZVY21scENyTGQ2UVo0c0owb2NXS2pQdjh3dm0wL0FqRm9uUlNBU1gKTGVQOFVreUNMc1FKSWF1MHJQbWlUYzQzYzRuTlY0cVlQYnFKbGJBWGpFZFd0WFF4VnNSdEhuUUxrb3ZXMFdRYQpZWUs2V2ZCaG1qVEh3eGtkR3FKS2dnU0JFSnNkQW5MZXRJL1UxaVkxREsyclExVGcvZnpHc3JEd3k3aWRLNWxBCmYzNi9DUmxSVkxRSVpOOEJpVzdkR3gwalY0MVlkdWVoelVDZ2g0OE51TTVqTUlVWHVCVGEwM25yQWNYcm5vWFMKSG54dXdvUDNaT2tPVVFKYngwZmgzYzFUdXdrK3pzUnp0T1RPRVRsV2lOSDdnSW8rdnJhbmV2TlRROCt6T3ZkSQpmODZHdHlqY1owTDY5OHVjWUhSU3RUV21hLzQzVjdWNlBRSURBUUFCbzRHNU1JRzJNQTRHQTFVZER3RUIvd1FFCkF3SUZvREFkQmdOVkhTVUVGakFVQmdnckJnRUZCUWNEQVFZSUt3WUJCUVVIQXdJd0RBWURWUjBUQVFIL0JBSXcKQURCM0JnTlZIUkVFY0RCdWdqTndZV05yWVdkbExYTmxjblpsY2k1dmNHVnVjMmhwWm5RdGIzQmxjbUYwYjNJdApiR2xtWldONVkyeGxMVzFoYm1GblpYS0NOM0JoWTJ0aFoyVXRjMlZ5ZG1WeUxtOXdaVzV6YUdsbWRDMXZjR1Z5CllYUnZjaTFzYVdabFkzbGpiR1V0YldGdVlXZGxjaTV6ZG1Nd0RRWUpLb1pJaHZjTkFRRUxCUUFEZ2dFQkFCaWcKcW9HVEpPa3FjNGpYeGpBNjlRS2xVa05DUWFlT2tnRlpZeTdtYUNnS0V4Qm8rejFuaUFFMmFEYU9WWDMvUC8yVgpQNUJLTVBvdTYrWHI1S2pBYk9HUTJBWUF5enpZZWphVmd4Z1NtSkFUdHBiRzVaU0VjQWx6ZGRCSXduUndqUjNKCjhCd2FVajBlQ0F0WndpRnUrQjErZjFDVXorWEpxRUp6R3ZaelFwWkJnZ2Z2LzJKU3NqcStqdFo5V2FJWEhpWjgKMG0wTEFIMzQwZ2FtOTJHVXR3ck1KTjRxZ0RXNlU2WGxsTnBHT1ZHZGEwYitFVzROdjNHMk54NE4vZTc1SWZOagpoczEvU0poVGFGaUxYa1ZEVUhJMlUvaW1IdWJseG8vV3QvUFFkRXFNLzB5blpuK2EzeWxJSWd4Q0xnQ1Yvei85CkRFUndnT1JHdUF1TGJrQWgyQWc9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBemM0Mnp0UnMyS0hmRlVjbWxwQ3JMZDZRWjRzSjBvY1dLalB2OHd2bTAvQWpGb25SClNBU1hMZVA4VWt5Q0xzUUpJYXUwclBtaVRjNDNjNG5OVjRxWVBicUpsYkFYakVkV3RYUXhWc1J0SG5RTGtvdlcKMFdRYVlZSzZXZkJobWpUSHd4a2RHcUpLZ2dTQkVKc2RBbkxldEkvVTFpWTFESzJyUTFUZy9mekdzckR3eTdpZApLNWxBZjM2L0NSbFJWTFFJWk44QmlXN2RHeDBqVjQxWWR1ZWh6VUNnaDQ4TnVNNWpNSVVYdUJUYTAzbnJBY1hyCm5vWFNIbnh1d29QM1pPa09VUUpieDBmaDNjMVR1d2srenNSenRPVE9FVGxXaU5IN2dJbyt2cmFuZXZOVFE4K3oKT3ZkSWY4Nkd0eWpjWjBMNjk4dWNZSFJTdFRXbWEvNDNWN1Y2UFFJREFRQUJBb0lCQVFDMU9TbS85UVFudWxwRApWVlRnYm1HZDBZYmM5bXpleW44MUNHajVYdmlTbGJtQUJqbVlMaHFsbVVVOWZ3dC9mTFlCeFQ0aXR1czVraVg0CkFsY2tCL0hKSVhJM3NrajZDSE9NOHRUamI3SWFoOXNNMzBCNVA2bVBSZHNzaVdTWXNuTlpFOHN5QWNpVU5yMGoKejBLN1BrVm5QK1FOOHJUeUJoZHlBZExoTkc0UE4vVjhEamQrNVE0amE3Zm1aVldyZVNhR21iSVd6cnRmZjdpRwplZyszb1YxMFl3NDVMNVAwMHhWWU54bUhxeHBkTnhxWHdKQmhjTUkxbkV3a3VRWXEwaSt4UDJuVTBGdkRqYUcvCnJoMHd4OEVUbkRtdEh1RUg4Mm1RUEFjbDJ4QUtxZkFZajNjVUQ1b1dxU3dJa3JBdnMwVzE2cmwxOHF6UzNFMjkKVzBmRkdtTU5Bb0dCQU9oT1FiSy8xT05DeVlYVUdHWUFBTmJPSVYyeDEvRndiUU5RNE41WlJHakZxSDVaL2RaOQo4c1NJSkpLaGUzQnhaR0thMlliNzM2VFBGd1U4MktYcGFWZmJ3YmRyd1FrZlFiMzB1UFYzTy9Hd0FPMmZwLzJ5CkxUaXdRdXFubDJLQWdIVlFjYllSLzlTVmdJVGdBMGl4b1BHTlFDK3BOaUYxWmRheVZYZ1NTemdUQW9HQkFPTE0KQXJLWHdLSWl3TktERVhLYjZzZ25aajRKZVVUclJzWHpnZVQrc1B1blVRRFFPcTA0L1htVmxxQ2tRTHJiS2YwQgpGcmluYytlZ2hUY2Z4Sm1PUERVREhNdEFkaWo5Q0x6dEJNMmhQUXJkZk9FVytncWorUnNUSmtLdDZWSzJxbnVaCjZXWFc3OFRXSldvTWZkUXVhNDBvTzQxS2lYU1dERW8wd1VsdEFHNXZBb0dCQUs3SGtpNkduZ21PaWtpaVZ1a0gKUDVwZDVFUzJOWjUxMDg4VzN0anJtTWlyVGlZaVZ4VTJGWjFBUVNRQlV2bzZsaWlLRVBlNk1YMnlRY096RDkxawpTOW5LZ1drYkxWVkxxdzdjUFB5U0JRdkdQQ3lNWHJ4RmZqaVVoUVEvcTJwMC9ERkhvUVkzYkovcEM1VHRaZ3NmCmVkUERUbk9OZ0NpVVIxYk5QZmprNnFyNUFvR0FSWkNhQ3ptczVvNk9Zb085YUZBVzFjbnYvSHRmYlJwVm5RWXkKQTVGenE5MElaWjE1UWdUSEN2SXRQNXppRmU1L2xKRXU3UGkvL240b0hsNXFLVWVOaEIwdVNkRzk3SmlnZzRLWQpCSksrYklTL2R6TmJBc1NFOWg4TGoweFUwd0FnanNVSTZDbmpaWmJoNXdOcDNSbFg5L1l0UGd0czJndmtQU2F0Cld0NUtVWlVDZ1lCQnplY3F2WW1UYk81eE9xUjhNR3VzUVN2RE1sZ09IQUtxQVNMQW9JSGYwbTNLZ3NOSTBzZm4Ka3h5RkZOZ25nQnJDa0EzQ2pGL0xxeHJreUdseC9pT3A2dlhrWE52V2ZmSXVWN1YxVUVuM3J5LzVrUXNoRGxwRwpEOXNCK3V4Z0Zsc2NPTEhmbU0yL0NCR0cwcDh3TlBtSzNpVzYwcGxsVWV5M1UybUw4N2Zsbnc9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo=
---
apiVersion: apps/v1beta1
kind: Deployment
metadata:
  name: package-server
  namespace: openshift-operator-lifecycle-manager
  labels:
    app: package-server
spec:
  strategy:
    type: RollingUpdate
  replicas: 1
  selector:
    matchLabels:
      app: package-server
  template:
    metadata:
      labels:
        app: package-server
    spec:
      serviceAccountName: olm-operator-serviceaccount
      containers:
      - name: package-server
        command:
        - /bin/package-server
        - -v=4
        - --global-namespace
        - openshift-operator-lifecycle-manager
        - --debug
        image: quay.io/coreos/package-server@sha256:cc18b5711fb2126329c969f077f67f41981c87f800f6b2ceae5981422c14917b
        imagePullPolicy: Always
        ports:
        - containerPort: 443
        volumeMounts:
        - name: certs
          mountPath: /apiserver.local.config/certificates
          readOnly: true
        livenessProbe:
            httpGet:
              scheme: HTTPS
              path: /healthz
              port: 443
        readinessProbe:
            httpGet:
              scheme: HTTPS
              path: /healthz
              port: 443
      volumes:
      - name: certs
        secret:
          secretName: package-server-certs
          items:
          - key: tls.crt
            path: apiserver.crt
          - key: tls.key
            path: apiserver.key
      imagePullSecrets:
        - name: coreos-pull-secret
---
apiVersion: v1
kind: Service
metadata:
  name: package-server
  namespace: openshift-operator-lifecycle-manager
spec:
  ports:
  - port: 443
    protocol: TCP
    targetPort: 443
  selector:
    app: package-server
